<div class="p-4 w-full">
  <div *ngIf="imagePreview" class="mb-3 flex items-center gap-2">
    <div class="relative">
      <img
        [src]="imagePreview"
        alt="Preview"
        class="w-20 h-20 object-cover rounded-lg border border-zinc-700"
      />
      <button
        (click)="removeImage()"
        class="absolute btn-soft btn-primary cursor-pointer text-primary -top-1.5 -right-1.5 w-5 h-5 rounded-full bg-base-300 flex items-center justify-center"
        type="button"
      >
        <!-- X icon SVG -->
        <svg
          width="12"
          height="12"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M18 6 6 18"></path>
          <path d="m6 6 12 12"></path>
        </svg>
      </button>
    </div>
  </div>

  <form (submit)="onSendMessage($event)" class="flex items-center gap-2">
    <div class="flex-1 flex gap-2">
      <input
        type="text"
        class="w-full input input-bordered rounded-lg input-sm sm:input-md input-primary"
        placeholder="Bir mesaj yazÄ±n..."
        [(ngModel)]="text"
        name="message"
      />
      <input
        type="file"
        accept="image/*"
        class="hidden"
        #fileInput
        (change)="handleImageChange($event)"
      />
      <button
        type="button"
        class="hidden sm:flex btn btn-circle btn-primary btn-soft hover:text-white"
        [ngClass]="imagePreview ? 'text-emerald-500' : 'text-primary'"
        (click)="fileInputRef.nativeElement.click()"
      >
        <!-- Image icon SVG -->
        <svg
          width="20"
          height="20"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          viewBox="0 0 24 24"
        >
          <rect x="3" y="3" width="18" height="18" rx="2" />
          <circle cx="8.5" cy="8.5" r="1.5" />
          <path d="M21 15l-5-5L5 21" />
        </svg>
      </button>
    </div>
    <button
      type="submit"
      class="btn btn-primary btn-soft sm:flex btn-circle"
      [disabled]="!text.trim() && !imagePreview"
    >
      <!-- Send icon SVG -->
      <svg
        width="22"
        height="22"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        viewBox="0 0 24 24"
      >
        <line x1="22" y1="2" x2="11" y2="13" />
        <polygon points="22 2 15 22 11 13 2 9 22 2" />
      </svg>
    </button>
  </form>
</div>
